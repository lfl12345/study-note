# Netty内存管理

Netty内存管理采用堆外内存分配的方式，从而避免了频繁的垃圾回收操作，这也是Netty内存管理设计的特殊之处。

内存管理的主要目的就是：合理分配内存，尽量减少内存碎片，能够及时回收资源，提高内存的使用效率。

**Netty的内存管理方式：**Netty框架的内存管理采用了jemalloc的思想，而jemalloc是FreeBSD系统实现的、基于多线程管理的内存管理算法。Netty内存管理的具体方式说明如下：

* 首先，分配一块较大的内存空间
* 然后，在内存分配和内存回收的操作过程中，使用一个类似数据库表结构的记录，监控内存的使用状态。这个监控是实时进行的，当新的内存操作到来时，会根据内存当前状态记录来完成操作。
* 最后，当内存操作完成或内存被释放后，会同步更新这个内存状态记录。

Netty框架的内存管理包括“有缓冲池”和“无缓冲池”两种方式

* 有缓冲池的内存管理方式会在内存回收时，将信息记录在缓冲池中，下次如果有合适的分配请求，则直接从缓冲池中复用。
* 无缓冲池的内存管理方式则相反。
* 使用有缓冲池的内存管理方式相比于无缓冲池的方式，其内存分配和内存回收的工作效率会更高。

















