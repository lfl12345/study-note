## 冗余数据保存问题

* 廉价的底层会不断地出故障，所以一个数据块默认备份三分，伪分布式的冗余银子只能是一

### 好处

* 加快数据传输速度
* 很容易检查数据错误，因为有参照
* 保证数据可靠性

## 数据保存策略问题

* 第一副本放置在产生数据块的DataNode，如果是在集群内部的话
* 如果在集群外部，会随机的选择一个内存不满，CPU不忙的datanode 放置
* 第二副本会放置在与第一副本不同的机架上
* 第三副本放置在第一副本相同的机架上
* 剩下的副本随机放置

### 数据读取

* 基本原则：就近原则。hdfs中提供了一个api可以确定一个数据结点所属的机架（就是几个服务器放置的地方）id，客户端也可以调用api获取自己所属的机架id。

## 数据恢复问题

* 名称结点出错
  * 暂停服务一段时间，从第二名称结点恢复（冷备份）
* 数据结点出错
  * 通过远程调用给名称结点发送心跳信息，说明自己还活着，一旦某个周期没有收到，那么这个结点出错
  * 之后名称结点把他标记为宕机。
  * 把故障机上的数据，复制到其他节点上 
* 数据本身出错
  * 通过校验码来判断数据是否出错，客户端写文件的时候都会生成校验码，保存在同一个文件下面
  * 

